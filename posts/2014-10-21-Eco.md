---
title: Review of Eco, or a language composition editor
author: Takayuki Muranushi, Junko Kominami
tags: Programming Language, Fusion, SPLASH
---

I've been to [SPLASH 2014](http://2014.splashcon.org/) conference, and learned many things. [](http://soft-dev.org/)

The absolute barriers that separate different programming languages --- is being neutralized. I witnessed, for the first time since the collapse of the Tower of Babel, multiple language fused together to realize what were impossible by individuals.
http://soft-dev.org/pubs/html/diekmann_tratt__eco_a_language_composition_editor/
 
The demo above shows an HTML, with Python program embedded here and there, which also hosts some SQL query strings. The whole program is interpreted as a python program that reads from a database and renders some HTML.
 
http://soft-dev.org/talks/2014/lille.pdf
Another demo showed a game, a variant of tic-tac-toe, played by Humans or by AIs. The game AIs are implemented as search-algorithms in Prolog, and the GUI is in Python.
 
http://soft-dev.org/talks/2014/vmm.pdf
Yet another demo showed a fused Python-PHP program, where Python parts can refer to PHP variables by their name, and vice versa. We need explicit conversions for some cases; for example, PHP arrays are internally represented as hash maps, so when imported to Python they show up as hash maps. Explicit method calls are needed to change them into Python arrays. But they are details.
 
How it works
==========
What is so super about language composition? Well, imagine text files that include multiple language pieces. Sometimes we will be able to sense different language parts using our built-in biological neural networks, but it is not hard to imagine ambiguous cases. Situation is worse for compilers, who have formal behaviors. The authors found that “In summary, when it comes to language composition, parsing approaches are either too limited (LR parsing), allow ambiguity (generalized parsing), or are hard to reason about (PEG parsing).”
 
Solution? Don’t try to parse texts. Instead, edit the syntax tree. This is a technology called syntax directed editing, that author said he found a brief article about it in the last page of a grammar book with remark “this doesn’t work.” Syntax directed editing has been field-tested in 70s and 80s, but programmers preferred their favorite text editors over GUI-based tree editors based on syntax directed editing.  
 
What is so innovative about Eco’s approach is their effort to make the syntax-directed editor look and feel much like usual text editor. Looking at their editor, Eco, indeed I thought it was a text editor. Behind the curtains, however, Eco holds an abstract syntax tree; the cursor is at a certain element of the syntax tree. The structure is saved as a tree, loaded as a tree --- it remains a tree all the time. Bad news is that we never get to use our favorite editor such as vi and emacs; Good news is that we now get to edit the fused syntax tree of multiple programming languages.
 
What you get in the end is a fused tree, and what it means is open to user interpretation. There are vast possibilities.
 
I saw several demo cases. In a HTML+SQL+Python demo, the treewas interpreted as 
Python+Prolog
PHP+Python

How it interprets
=====

 http://soft-dev.org/talks/2014/vmm.pdf　